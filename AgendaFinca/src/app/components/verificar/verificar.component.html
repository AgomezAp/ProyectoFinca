<section class="verificar-hero-section">
  <img src="assets/images/Jardines.webp" alt="Fondo Verificar" class="verificar-background">
  <div class="verificar-overlay"></div>

  <div class="verificar-content">
    <img src="assets/logos/ISOTIPO.svg" alt="Logo Finca" class="verificar-logo">

    <p class="verificar-label">
      <span class="decorative-line-side"></span>
      Formulario
      <span class="decorative-line-side"></span>
    </p>

    <h1 class="verificar-title">Verificar Mi Reserva</h1>

    <div class="verificar-decorative-line"></div>
    
    <div class="verificar-form-card">
      <form #formCorreo="ngForm" class="verificar-form">
        <p class="verificar-instruction">Escribe los datos asociados a tu reserva</p>
        <div class="verificar-input-wrapper">
          <input
            type="text"
            name="data"
            [(ngModel)]="data"
            required
            placeholder="Correo electrónico o número de documento"
            class="verificar-input">
        </div>
        <button
          type="submit"
          class="verificar-button"
          [disabled]="formCorreo.invalid"
          (click)="buscar()">
          <mat-icon>search</mat-icon>
          VERIFICAR
        </button>
        <div *ngIf="errorMessage" class="error-message-verificar">
          {{ errorMessage }}
        </div>
      </form>
    </div>
  </div>
</section>


<!-- Modal de información de reserva -->
<div *ngIf="reserva && reserva.length > 0" class="modal-overlay-verificar" (click)="cerrarModal()">
  <div class="modal-card-verificar" (click)="$event.stopPropagation()">
    <!-- Botón de cerrar -->
    <button class="modal-close-btn" (click)="cerrarModal()" title="Cerrar">
      <mat-icon>close</mat-icon>
    </button>

    <div class="modal-header-verificar" [ngClass]="getEstadoReserva()">
      <div class="success-badge" [ngClass]="getEstadoReserva()">
        <mat-icon>{{ getIconoEstado() }}</mat-icon>
      </div>
      <h2 class="modal-title-verificar">¡Hola {{ reserva[0].nombre }}!</h2>
      <div class="estado-reserva-badge" [ngClass]="getEstadoReserva()">
        {{ getTextoEstado() }}
      </div>
    </div>

    <div class="modal-body-verificar">
      <p class="modal-message-primary">
        {{ getMensajePrincipal() }}
        <strong>{{ reserva[0].fechaLlegada | date:'longDate' }}</strong> y 
        <strong>{{ reserva[0].fechaSalida | date:'longDate' }}</strong>{{ getEstadoReserva() === 'rechazado' ? ' ha sido rechazada' : '' }}.
      </p>

      <p class="modal-message-secondary" [innerHTML]="getMensajeSecundario()"></p>

      <div class="reserva-details-grid">
        <div class="detail-card">
          <div class="detail-icon">
            <mat-icon>email</mat-icon>
          </div>
          <div class="detail-info">
            <span class="detail-label">Correo electrónico:</span>
            <span class="detail-value">{{ reserva[0].email }}</span>
          </div>
        </div>

        <div class="detail-card">
          <div class="detail-icon">
            <mat-icon>people</mat-icon>
          </div>
          <div class="detail-info">
            <span class="detail-label">Número de personas:</span>
            <span class="detail-value">{{ reserva[0].cantidad }} personas</span>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer-verificar">
      <button class="modal-action-btn" (click)="cerrarModal()">Entendido</button>
    </div>
  </div>
</div>