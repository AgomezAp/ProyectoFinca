<section class="reserva-hero-section">
    <img src="assets/images/Jardines.webp" alt="Fondo Reserva" class="reserva-background">
    <div class="reserva-overlay"></div>
    <div class="reserva-content">
        <img src="assets/logos/ISOTIPO.svg" alt="Logo Finca" class="reserva-logo">
        <p class="reserva-label">
            <span class="decorative-line-side"></span>
            Formulario
            <span class="decorative-line-side"></span>
        </p>
        <h1 class="reserva-title">Reservar Tu Estadia</h1>
        <div class="reserva-decorative-line"></div>
        <p class="reserva-subtitle">Completa los datos para tu reserva en Finca El Progreso</p>
        <div class="reserva-form-card">
            <form #formulario="ngForm" class="reserva-form">
                <div class="form-row-two">
                    <div class="form-group-reserva">
                        <label class="form-label-reserva">Fecha de llegada</label>
                        <div class="input-wrapper-reserva">
                            <input type="date" 
                                   id="fechaInicio"
                                   name="Inicio" 
                                   [(ngModel)]="fechaInicio" 
                                   readonly
                                   class="input-reserva" placeholder="dd/mm/aaaa">
                            <mat-icon class="input-icon-reserva">calendar_today</mat-icon>
                        </div>
                    </div>

                    <div class="form-group-reserva">
                        <label class="form-label-reserva">Fecha de salida</label>
                        <div class="input-wrapper-reserva">
                            <input type="date" 
                                   id="fechaFin"
                                   name="Fin" 
                                   [(ngModel)]="fechaFin" 
                                   readonly
                                   class="input-reserva" placeholder="dd/mm/aaaa">
                            <mat-icon class="input-icon-reserva">calendar_today</mat-icon>
                        </div>
                    </div>
                </div>
                
                <div class="form-group-reserva full-width">
                    <label class="form-label-reserva">Huéspedes</label>
                    <div class="select-wrapper-reserva">
                        <select id="personas"
                                name="personas" 
                                [(ngModel)]="personas" 
                                class="select-reserva">
                                <option value="" disabled>2 personas</option>
                                <option *ngFor="let i of huespedes" [value]="i">{{i}} personas</option>
                        </select>
                        <mat-icon class="select-icon-reserva">expand_more</mat-icon>
                    </div>
                </div>
                
                <div class="form-row-two">
                    <div class="form-group-reserva">
                        <label class="form-label-reserva">Nombre Completo</label>
                        <div class="input-wrapper-reserva">
                            <input type="text" 
                                    id="nombre"
                                    name="nombre" 
                                    [(ngModel)]="nombre" 
                                    required 
                                    #nombreCtrl="ngModel"
                                    class="input-reserva"
                                    placeholder="Escribe tu nombre">
                        </div>
                        <div class="error-message-reserva" *ngIf="nombreCtrl.invalid && nombreCtrl.touched">
                            El nombre es obligatorio.
                        </div>
                    </div>

                    <div class="form-group-reserva">
                        <label class="form-label-reserva">Documento</label>
                        <div class="input-wrapper-reserva">
                            <input type="text" 
                                   id="cc"
                                   name="cc" 
                                   [(ngModel)]="cc" 
                                   required 
                                   pattern="^[0-9]+$" 
                                   #ccCtrl="ngModel"
                                   class="input-reserva"
                                   placeholder="1.234.567.890">
                        </div>
                        <div class="error-message-reserva" *ngIf="ccCtrl.invalid && ccCtrl.touched">
                            La cédula es obligatoria y debe contener solo números.
                        </div>
                    </div>
                </div>

                <div class="form-row-two">
                    <div class="form-group-reserva">
                        <label class="form-label-reserva">Teléfono</label>
                        <div class="input-wrapper-reserva">
                            <input type="tel" 
                                   id="telefono"
                                   name="telefono" 
                                   [(ngModel)]="telefono" 
                                   required 
                                   pattern="^[0-9]+$" 
                                   #telCtrl="ngModel"
                                   class="input-reserva"
                                   placeholder="312 345 6789">
                        </div>
                        <div class="error-message-reserva" *ngIf="telCtrl.invalid && telCtrl.touched">
                            El teléfono es obligatorio y debe contener solo números.
                        </div>
                    </div>

                    <div class="form-group-reserva">
                        <label class="form-label-reserva">Correo electrónico</label>
                        <div class="input-wrapper-reserva">
                            <input type="email" 
                                   id="email"
                                   name="email" 
                                   [(ngModel)]="email" 
                                   required 
                                   email 
                                   #emailCtrl="ngModel"
                                   class="input-reserva"
                                   placeholder="ejemplo@email.com">
                        </div>
                        <div class="error-message-reserva" *ngIf="emailCtrl.invalid && emailCtrl.touched">
                            Ingresa un correo electrónico válido.
                        </div>
                    </div>
                </div>

                <div class="form-row-two">
                    <div class="form-group-reserva">
                        <label class="form-label-reserva">Documento lado frontal</label>
                        <div class="file-wrapper-reserva">
                            <input type="text" 
                                   [value]="FrontalName || 'No se eligió...ningún archivo'" 
                                   readonly
                                   class="input-reserva file-input-display">
                            <button type="button" class="file-button-reserva" (click)="fileFrente.click()">
                                Elegir archivo
                            </button>
                        </div>
                        <input type="file" 
                               name="documento_f" 
                               accept="image/*,.pdf" 
                               hidden 
                               #fileFrente 
                               (change)="mostrarVistaPrevia($event, 'frente')">
                        <img id="vistaPreviaFrente" class="preview-hidden">
                    </div>
                
                    <div class="form-group-reserva">
                        <label class="form-label-reserva">Documento lado posterior</label>
                        <div class="file-wrapper-reserva">
                            <input type="text" 
                                   [value]="AtrasName || 'No se eligió...ningún archivo'" 
                                   readonly
                                   class="input-reserva file-input-display">
                            <button type="button" class="file-button-reserva" (click)="fileAtras.click()">
                                Elegir archivo
                            </button>
                        </div>
                        <input type="file" 
                               name="documento_p" 
                               accept="image/*,.pdf" 
                               hidden 
                               #fileAtras 
                               (change)="mostrarVistaPrevia($event, 'atras')">
                        <img id="vistaPreviaAtras" class="preview-hidden">
                    </div>
                </div>
                <div class="form-group-reserva full-width">
                    <label class="form-label-reserva">Rostro con documento en mano</label>
                    <div class="file-wrapper-reserva">
                        <input type="text"
                               [value]="RostroName || 'No se eligió...ningún archivo'" 
                               readonly
                               class="input-reserva file-input-display">
                        <button type="button" class="file-button-reserva" (click)="fileRostro.click()">
                            Elegir archivo
                        </button>
                    </div>
                    <input type="file"
                           name="rostro" 
                           accept="image/*,.pdf" 
                           hidden 
                           #fileRostro 
                           (change)="mostrarVistaPrevia($event, 'rostro')">
                    <img id="vistaPreviaRostro" class="preview-hidden">
                </div>

                <div class="checkbox-group-reserva">
                    <label class="checkbox-label-reserva">
                        <input type="checkbox" [(ngModel)]="terminos" name="terminos" required class="checkbox-input">
                        <span class="checkbox-custom"></span>
                        <span class="checkbox-text-reserva">Acepto los <a href="/terminos" class="checkbox-link">términos y condiciones</a> del servicio.</span>
                    </label>
                
                    <label class="checkbox-label-reserva">
                        <input type="checkbox" [(ngModel)]="datos" name="datos" required class="checkbox-input">
                        <span class="checkbox-custom"></span>
                        <span class="checkbox-text-reserva">Autorizo el <a href="/manejodatos" class="checkbox-link">manejo y tratamiento de mis datos personales.</a></span>
                    </label>
                
                    <label class="checkbox-label-reserva">
                        <input type="checkbox" [(ngModel)]="veridica" name="veridica" required class="checkbox-input">
                        <span class="checkbox-custom"></span>
                        <span class="checkbox-text-reserva">Confirmo que toda la información proporcionada es verídica.</span>
                    </label>
                    <p class="checkbox-note-reserva">Al marcar estas casillas, confirmas que has leído y aceptas todas las condiciones del contrato de alquiler de la Finca El Progreso.</p>
                </div>
                
                <div class="button-group-reserva">
                    <button type="submit" 
                            [disabled]="formulario.invalid || enviando" 
                            (click)="enviarData()"
                            class="btn-reserva btn-primary-reserva">
                        <mat-icon *ngIf="!enviando">check_circle</mat-icon>
                        <mat-icon *ngIf="enviando" class="spinner-icon">refresh</mat-icon>
                        {{ enviando ? 'Enviando...' : 'Enviar Reserva' }}
                    </button>
                    <button type="button" 
                            (click)="volver()"
                            class="btn-reserva btn-secondary-reserva">
                        <mat-icon>arrow_back</mat-icon>
                        Volver
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>